<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
	<!-- 
	Mapping file autogenerated by MyEclipse - Hibernate Tools
-->
<hibernate-mapping>

	<sql-query name="empleado.consulta">
		<return-scalar column="anos_retiro" type="java.lang.String" />
		<return-scalar column="EMP_ESTADO" type="java.lang.String" />
		<return-scalar column="EMP_CEDULA" type="java.lang.String" />
		SELECT distinct CAST((CASE WHEN (ROUND(months_between(CURRENT_DATE,FECHA_RETIRO)/12)) < 0 THEN 0
		WHEN FECHA_RETIRO IS NULL THEN 0 ELSE round((months_between(CURRENT_DATE,FECHA_RETIRO)/12),2) END) AS decimal(10,2)) anos_retiro , 
		CASE WHEN (ROUND(months_between(CURRENT_DATE,FECHA_RETIRO)/12)) < 0 THEN 'A' ELSE 'R' END
		,NUMERO_DOCUMENTO FROM elecdb.ELE_ASOCIADO_ESPECIAL a
		WHERE a.fecha_ingreso =
		(select max(b.fecha_ingreso) FROM elecdb.ELE_ASOCIADO_ESPECIAL b WHERE
		b.NUMERO_DOCUMENTO= A.NUMERO_DOCUMENTO)
		AND a.NUMERO_DOCUMENTO=?
	</sql-query>

</hibernate-mapping>



